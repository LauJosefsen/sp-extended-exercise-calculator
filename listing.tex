\documentclass[a4paper]{report}

\usepackage[a4paper, total={18cm, 26cm}]{geometry}
\usepackage[T1]{fontenc} % needed by beramono
\usepackage{textcomp}
% beramono.sty and MnSymbol.sty come with texlive-fonts-extra in Debian
\usepackage[scaled=0.85]{beramono} % tt font supporting slshape and zero with dot
\usepackage{MnSymbol} % fancy symbols for line-breaks
\usepackage{listings} % code listings, comes with texlive-latex-recommended
\usepackage{xcolor}

\lstdefinestyle{bwC++}{
  language=C++,morekeywords={constexpr},
  basicstyle=\ttfamily,
  keywordstyle=\bfseries,
  stringstyle=\slshape,
  commentstyle=\slshape,
  morecomment=[s][\bfseries\slshape]{/**}{*/},
  tabsize=4,
  showstringspaces=false,
  breaklines=true, breakatwhitespace=true,
  prebreak={\hbox{\quad$\rhookswarrow$}},
  postbreak={\hbox{$\lhookrightarrow$}},
  breakindent={-8pt}, breakautoindent=false,
  numbers=left, numberstyle=\tiny,
  frameshape={RYR}{N}{N}{YYY} %frame=tb,frameround=tttt
}

\lstdefinestyle{colorC++}{
  language=C++,morekeywords={constexpr},
  basicstyle=\ttfamily,
  keywordstyle=\textcolor{blue},
  stringstyle=\slshape\textcolor{red!70!black},
  commentstyle=\slshape\textcolor{green!50!black},
  morecomment=[s][\bfseries\slshape\textcolor{green!50!black}]{/**}{*/},
  tabsize=4,
  showstringspaces=false,
  breaklines=true, breakatwhitespace=true,
  prebreak={\hbox{\quad\textcolor{red}{$\rhookswarrow$}}},
  postbreak={\hbox{\textcolor{red}{$\lhookrightarrow$}}},
  breakindent={-8pt}, breakautoindent=false,
  numbers=left, numberstyle=\tiny,
  frameshape={RYR}{N}{N}{YYY} %frame=tb,frameround=tttt
}

\title{Source Listing for Extended Exercise 2}
\author{Lau Ernebjerg Josefsen (room 1.213 NOVI9)}

\begin{document}
\maketitle
\section{Notes on solution}
\begin{itemize}
    \item I wanted to move the make\_shared<> to the constructors, to indicate ownership. However I had trouble to refactor the code to achieve this, as I could not construct virtual members. I thought of creating a virtual constructor so to say, but C++ is not happy about that. Instead i ended up just moving the shared\_pointer on construction.
    \item I did not create the class assign\_t, as I just see it as a binary operator, and it fits just fine there. The rest of the compounded assignments could just be written in expr.cpp.
    \item I changed the symbol table to an unordered\_map, as that made more sense to me.
\end{itemize}
\section{Solution}
\lstinputlisting[style=colorC++,caption={expr\_t.hpp}]{expr_t.hpp}
\lstinputlisting[style=colorC++,caption={expr\_t.cpp}]{expr_t.cpp}
\lstinputlisting[style=colorC++,caption={term\_t.hpp}]{term_t.hpp}
\lstinputlisting[style=colorC++,caption={const\_t.hpp}]{const_t.hpp}
\lstinputlisting[style=colorC++,caption={var\_t.hpp}]{var_t.hpp}
\lstinputlisting[style=colorC++,caption={unary\_t.hpp}]{unary_t.hpp}
\lstinputlisting[style=colorC++,caption={binary\_t.hpp}]{binary_t.hpp}
\lstinputlisting[style=colorC++,caption={test\_calculator.cpp}]{test_calculator.cpp}


\end{document}